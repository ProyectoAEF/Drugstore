Index: app/src/main/res/layout/activity_update_user.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    tools:context=\".Update_user\">\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <Button\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:onClick=\"eliminar_cuenta\"\r\n            android:text=\"Eliminar\" />\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <EditText\r\n            android:id=\"@+id/textnombre\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:hint=\"nuevo nombre\" />\r\n\r\n        <Button\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:onClick=\"actu_nombre\"\r\n            android:text=\"Actualizar\" />\r\n    </LinearLayout>\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <EditText\r\n            android:id=\"@+id/textapellido\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:hint=\"nuevo apellido\" />\r\n\r\n        <Button\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:onClick=\"actu_apellido\"\r\n            android:text=\"Actualizar\" />\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <EditText\r\n            android:id=\"@+id/textnumid\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:hint=\"nuevo Num ID\" />\r\n\r\n        <Button\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:onClick=\"actu_numid\"\r\n            android:text=\"Actualizar\" />\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <EditText\r\n            android:id=\"@+id/textemail\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:hint=\"nevo email\"\r\n            android:inputType=\"textEmailAddress\"/>\r\n\r\n        <Button\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:onClick=\"actu_email\"\r\n            android:text=\"Actualizar Email\" />\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <EditText\r\n            android:id=\"@+id/textpassword\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:hint=\"nuevo contraseñoa\"\r\n            android:inputType=\"textPassword\"/>\r\n\r\n        <Button\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:onClick=\"actu_password\"\r\n            android:text=\"Actualizar contraseña\" />\r\n    </LinearLayout>\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_update_user.xml	(revision a257bc80f6f7d6b1d7ce7086a86831e43a971a2d)
+++ app/src/main/res/layout/activity_update_user.xml	(date 1605554719765)
@@ -1,112 +1,181 @@
 <?xml version="1.0" encoding="utf-8"?>
-<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
-    android:orientation="vertical"
-    tools:context=".Update_user">
-    <LinearLayout
+    tools:context=".Update_user"
+    android:background="@drawable/fonodoup">
+<LinearLayout
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    android:orientation="vertical">
+    <ImageView
+        android:id="@+id/imageView2"
         android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:orientation="horizontal">
-
-        <Button
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:onClick="eliminar_cuenta"
-            android:text="Eliminar" />
-
-    </LinearLayout>
-
+        android:layout_height="70dp"
+        android:layout_marginTop="4dp"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        app:srcCompat="@drawable/ic_baseline_person_24" />
     <LinearLayout
         android:layout_width="match_parent"
-        android:layout_height="wrap_content">
+        android:layout_height="wrap_content"
+        android:layout_marginTop="24dp">
 
         <EditText
             android:id="@+id/textnombre"
             android:layout_width="0dp"
             android:layout_height="wrap_content"
             android:layout_weight="1"
-            android:hint="nuevo nombre" />
+            android:hint="Ingrese nuevo nombre"
+            android:background="@drawable/round_border"
+            android:backgroundTint="#FFFFFF"
+            android:padding="14dp"
+            android:textAlignment="center"/>
 
         <Button
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:onClick="actu_nombre"
-            android:text="Actualizar" />
+            android:text="Editar"
+            android:textColor="#7F47DD"
+            android:background="@drawable/round_bg"
+            android:backgroundTint="#FFFFFF"
+            android:padding="16dp"/>
     </LinearLayout>
     <LinearLayout
         android:layout_width="match_parent"
-        android:layout_height="wrap_content">
+        android:layout_height="wrap_content"
+        android:layout_marginTop="24dp">
 
         <EditText
             android:id="@+id/textapellido"
             android:layout_width="0dp"
             android:layout_height="wrap_content"
             android:layout_weight="1"
-            android:hint="nuevo apellido" />
+            android:hint="Ingrese nuevo apellido"
+            android:background="@drawable/round_border"
+            android:backgroundTint="#FFFFFF"
+            android:padding="14dp"
+            android:textAlignment="center"
+            />
 
         <Button
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:onClick="actu_apellido"
-            android:text="Actualizar" />
+            android:text="Editar"
+            android:textColor="#7F47DD"
+            android:background="@drawable/round_bg"
+            android:backgroundTint="#FFFFFF"
+            android:padding="16dp"/>
     </LinearLayout>
 
     <LinearLayout
         android:layout_width="match_parent"
-        android:layout_height="wrap_content">
+        android:layout_height="wrap_content"
+        android:layout_marginTop="24dp">
 
         <EditText
             android:id="@+id/textnumid"
             android:layout_width="0dp"
             android:layout_height="wrap_content"
             android:layout_weight="1"
-            android:hint="nuevo Num ID" />
+            android:hint="Ingrese nuevo Num ID"
+            android:background="@drawable/round_border"
+            android:backgroundTint="#FFFFFF"
+            android:padding="14dp"
+            android:textAlignment="center"
+            android:drawableStart="@drawable/ic_baseline_credit_card_24"/>
 
         <Button
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:onClick="actu_numid"
-            android:text="Actualizar" />
+            android:text="Editar"
+            android:textColor="#7F47DD"
+            android:background="@drawable/round_bg"
+            android:backgroundTint="#FFFFFF"
+            android:padding="16dp"/>
     </LinearLayout>
 
     <LinearLayout
         android:layout_width="match_parent"
-        android:layout_height="wrap_content">
+        android:layout_height="wrap_content"
+        android:layout_marginTop="24dp">
 
         <EditText
             android:id="@+id/textemail"
             android:layout_width="0dp"
             android:layout_height="wrap_content"
             android:layout_weight="1"
-            android:hint="nevo email"
-            android:inputType="textEmailAddress"/>
+            android:hint="Ingrese nuevo email"
+            android:inputType="textEmailAddress"
+            android:background="@drawable/round_border"
+            android:backgroundTint="#FFFFFF"
+            android:padding="14dp"
+            android:textAlignment="center"
+            android:drawableStart="@drawable/ic_baseline_email_24"/>
 
         <Button
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:onClick="actu_email"
-            android:text="Actualizar Email" />
+            android:text="Actualizar"
+            android:textColor="#7F47DD"
+            android:background="@drawable/round_bg"
+            android:backgroundTint="#FFFFFF"
+            android:padding="16dp"/>
     </LinearLayout>
 
     <LinearLayout
         android:layout_width="match_parent"
-        android:layout_height="wrap_content">
+        android:layout_height="wrap_content"
+        android:layout_marginTop="24dp">
 
         <EditText
             android:id="@+id/textpassword"
             android:layout_width="0dp"
             android:layout_height="wrap_content"
             android:layout_weight="1"
-            android:hint="nuevo contraseñoa"
+            android:background="@drawable/round_border"
+            android:backgroundTint="#FFFFFF"
+            android:hint="Ingrese nueva contraseña"
+            android:padding="14dp"
+            android:textAlignment="center"
+            android:drawableStart="@drawable/ic_baseline_lock_24"
             android:inputType="textPassword"/>
 
         <Button
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:onClick="actu_password"
-            android:text="Actualizar contraseña" />
+            android:text="Actualizar"
+            android:textColor="#7F47DD"
+            android:padding="16dp"
+            android:background="@drawable/round_bg"
+            android:backgroundTint="#FFFFFF"
+            />
+    </LinearLayout>
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:orientation="horizontal"
+        android:layout_marginTop="24dp"
+        android:gravity="center">
+
+        <Button
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:background="@drawable/round_bg"
+            android:backgroundTint="#FFFFFF"
+            android:onClick="eliminar_cuenta"
+            android:padding="16dp"
+            android:text="Eliminar cuenta"
+            android:textColor="#7F47DD" />
+
+        </LinearLayout>
     </LinearLayout>
-</LinearLayout>
\ No newline at end of file
+</ScrollView>
\ No newline at end of file
Index: app/src/main/java/com/example/drugstore/Update_user.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.drugstore\r\n\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.text.TextUtils\r\nimport android.view.View\r\nimport android.widget.EditText\r\nimport android.widget.Toast\r\nimport com.google.firebase.auth.EmailAuthCredential\r\nimport com.google.firebase.auth.EmailAuthProvider\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.FirebaseUser\r\nimport com.google.firebase.database.DataSnapshot\r\nimport com.google.firebase.database.DatabaseError\r\nimport com.google.firebase.database.FirebaseDatabase\r\nimport com.google.firebase.database.ValueEventListener\r\n\r\nclass Update_user : AppCompatActivity() {\r\n\r\n    private lateinit var textnombre:EditText\r\n    private lateinit var textapellido:EditText\r\n    private lateinit var textnumid:EditText\r\n    private  lateinit var textemail:EditText\r\n    private lateinit var textpassword:EditText\r\n    private lateinit var mAuthStateListener: FirebaseAuth.AuthStateListener\r\n    private lateinit var mAuth: FirebaseAuth\r\n    private val mDatabase= FirebaseDatabase.getInstance().getReference(\"User\")\r\n    private val user=FirebaseAuth.getInstance().currentUser\r\n    private val userid= user?.uid.toString()\r\n    override fun onStart() {\r\n        super.onStart()\r\n        mAuth.addAuthStateListener(mAuthStateListener)\r\n    }\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_update_user)\r\n        textnombre=findViewById(R.id.textnombre)\r\n        textapellido=findViewById(R.id.textapellido)\r\n        textnumid=findViewById(R.id.textnumid)\r\n        textemail=findViewById(R.id.textemail)\r\n        textpassword=findViewById(R.id.textpassword)\r\n        mAuth=FirebaseAuth.getInstance()\r\n\r\n\r\n        mAuthStateListener=FirebaseAuth.AuthStateListener{\r\n            if(user==null){\r\n                startActivity(Intent(this,LoginActivity::class.java))\r\n                finish()\r\n            }else{\r\n                mDatabase.child(userid).addValueEventListener(object: ValueEventListener {\r\n                    override fun onDataChange(snapshot: DataSnapshot) {\r\n                        if(snapshot.exists()){\r\n                            textnombre.setText(snapshot.child(\"Name\").getValue().toString())\r\n                            textapellido.setText(snapshot.child(\"Last Name\").getValue().toString())\r\n                            textnumid.setText(snapshot.child(\"Num ID\").getValue().toString())\r\n                        }\r\n                    }\r\n                    override fun onCancelled(error: DatabaseError) {\r\n                        TODO(\"Not yet implemented\")\r\n                    }\r\n\r\n                })\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n     fun eliminar_cuenta(view:View){\r\n\r\n        user?.delete()?.addOnCompleteListener{ task->\r\n            if(task.isComplete){\r\n                finish()\r\n                startActivity(Intent(this,LoginActivity::class.java))\r\n                Toast.makeText(this,\"Usuario eliminado\",Toast.LENGTH_LONG).show()\r\n            }else{\r\n                finish()\r\n                startActivity(Intent(this,LoginActivity::class.java))\r\n                Toast.makeText(this,\"Error al eliminar\",Toast.LENGTH_LONG).show()\r\n            }\r\n        }\r\n    }\r\n\r\n     fun actu_nombre(view:View){\r\n         mDatabase.child(userid).child(\"Name\").setValue(textnombre.text.toString()).addOnCompleteListener { task->\r\n             if (task.isComplete){\r\n                 Toast.makeText(this, \"Usuario actualizado\", Toast.LENGTH_SHORT).show()\r\n             }else{\r\n                 Toast.makeText(this, \"Error al actualizar\", Toast.LENGTH_SHORT).show()\r\n             }\r\n         }\r\n    }\r\n\r\n\r\n\r\n     fun actu_apellido(view:View){\r\n        mDatabase.child(userid).child(\"Last Name\").setValue(textapellido.text.toString()).addOnCompleteListener { task->\r\n            if (task.isComplete){\r\n                Toast.makeText(this, \"Usuario actualizado\", Toast.LENGTH_SHORT).show()\r\n            }else{\r\n                Toast.makeText(this, \"Error al actualizar\", Toast.LENGTH_SHORT).show()\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n     fun actu_numid(view:View){\r\n         mDatabase.child(userid).child(\"Num ID\").setValue(textnumid.text.toString()).addOnCompleteListener { task->\r\n             if (task.isComplete){\r\n                 Toast.makeText(this, \"Usuario actualizado\", Toast.LENGTH_SHORT).show()\r\n             }else{\r\n                 Toast.makeText(this, \"Error al actualizar\", Toast.LENGTH_SHORT).show()\r\n             }\r\n         }\r\n\r\n    }\r\n\r\n     fun actu_email(view:View){\r\n        val newemail:String=textemail.text.toString()\r\n         user!!.updateEmail(newemail).addOnCompleteListener {task->\r\n             if (task.isSuccessful){\r\n                 finish()\r\n                 startActivity(Intent(this,LoginActivity::class.java))\r\n                 Toast.makeText(this, \"Email actualizado\", Toast.LENGTH_LONG).show()\r\n             }else{\r\n                 Toast.makeText(this, \"Error al actualizar\", Toast.LENGTH_LONG).show()\r\n                 finish()\r\n                 startActivity(Intent(this, LoginActivity::class.java))\r\n             }\r\n         }\r\n    }\r\n\r\n\r\n    fun actu_password(view:View) {\r\n        val newpass: String = textpassword.text.toString()\r\n        if (TextUtils.isEmpty(newpass) || newpass.length < 6) {\r\n                    textpassword.setError(\"La contraseña minima es de 6 caracteres\")\r\n        }else{\r\n            user!!.updatePassword(newpass).addOnCompleteListener { task ->\r\n                if (task.isSuccessful) {\r\n                    Toast.makeText(this, \"Constraseña actualizada\", Toast.LENGTH_LONG).show()\r\n                    finish()\r\n                    startActivity(Intent(this, LoginActivity::class.java))\r\n                } else {\r\n                    Toast.makeText(this, \"Error al actualizar\", Toast.LENGTH_LONG).show()\r\n                    finish()\r\n                    startActivity(Intent(this, LoginActivity::class.java))\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/drugstore/Update_user.kt	(revision a257bc80f6f7d6b1d7ce7086a86831e43a971a2d)
+++ app/src/main/java/com/example/drugstore/Update_user.kt	(date 1605550539386)
@@ -35,6 +35,8 @@
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
         setContentView(R.layout.activity_update_user)
+        val actionBar=supportActionBar
+        actionBar?.hide()
         textnombre=findViewById(R.id.textnombre)
         textapellido=findViewById(R.id.textapellido)
         textnumid=findViewById(R.id.textnumid)
Index: app/src/main/java/com/example/drugstore/LoginActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.drugstore\r\n\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.text.TextUtils\r\nimport android.view.View\r\nimport android.widget.EditText\r\nimport android.widget.ProgressBar\r\nimport android.widget.Toast\r\nimport androidx.appcompat.app.ActionBar\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.database.FirebaseDatabase\r\nimport com.google.firebase.database.core.utilities.Utilities\r\nimport kotlinx.android.synthetic.main.activity_login.*\r\n\r\nclass LoginActivity : AppCompatActivity() {\r\n    private lateinit var editTextTextEmailAddress:EditText\r\n    private lateinit var editTextTextPassword:EditText\r\n    private lateinit var progressBar: ProgressBar\r\n    private lateinit var auth: FirebaseAuth\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        setTheme(R.style.AppTheme)\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_login)\r\n\r\n        val actionBar=supportActionBar\r\n        actionBar?.hide()\r\n\r\n        editTextTextEmailAddress=findViewById(R.id.editTextTextEmailAddress)\r\n        editTextTextPassword=findViewById(R.id.editTextTextPassword)\r\n        progressBar=findViewById(R.id.progressBar3)\r\n        auth= FirebaseAuth.getInstance()\r\n    }\r\n    fun login(view:View){\r\n        loginUser()\r\n    }\r\n\r\n    fun forgotpassword(view:View){\r\n        startActivity(Intent(this,ForgotPassActivity()::class.java))\r\n    }\r\n\r\n    fun register(view: View){\r\n        startActivity(Intent(this,RegisterActivity::class.java))\r\n    }\r\n\r\n    private fun loginUser(){\r\n        val user:String=editTextTextEmailAddress.text.toString()\r\n        val password:String=editTextTextPassword.text.toString()\r\n\r\n        if(!TextUtils.isEmpty(user)&&!TextUtils.isEmpty(password)){\r\n            progressBar3.visibility=View.VISIBLE\r\n\r\n            auth.signInWithEmailAndPassword(user,password)\r\n                .addOnCompleteListener(this){\r\n                        task->\r\n\r\n                    if(task.isSuccessful){\r\n                        action()\r\n                    }else{\r\n                        Toast.makeText(this,\"Error en la autenticacion\",Toast.LENGTH_LONG).show()\r\n                    }\r\n                }\r\n        }\r\n    }\r\n    private fun action(){\r\n        finish()\r\n        val mDatabase= FirebaseDatabase.getInstance().getReference(\"User\")\r\n        val user=FirebaseAuth.getInstance().currentUser\r\n        val userid= user?.uid.toString()\r\n        val intent = Intent(this, Tienda::class.java).apply { putExtra(\"cliente\", userid) }\r\n        startActivity(intent)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/drugstore/LoginActivity.kt	(revision a257bc80f6f7d6b1d7ce7086a86831e43a971a2d)
+++ app/src/main/java/com/example/drugstore/LoginActivity.kt	(date 1605547521374)
@@ -56,7 +56,9 @@
                         task->
 
                     if(task.isSuccessful){
-                        action()
+                        finish()
+                        startActivity(Intent(this,Update_user::class.java))
+                        //action()
                     }else{
                         Toast.makeText(this,"Error en la autenticacion",Toast.LENGTH_LONG).show()
                     }
